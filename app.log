2024-06-28 15:00:14,771 - INFO - Please enter incorrect address here or type 'q' to quit
2024-06-28 15:00:40,280 - INFO - Initializing caseClassifier...
2024-06-28 15:00:40,295 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-db-path/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '158c0a33-3531-11ef-9e2b-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
No body was attached to the request
2024-06-28 15:00:41,447 - INFO - Response status: 401
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Length': '97'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'WWW-Authenticate': 'Bearer authorization="https://login.microsoftonline.com/e2fc2501-6769-4e5b-ba7b-c1f3e01ca3dc", resource="https://vault.azure.net"'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '158c0a33-3531-11ef-9e2b-a029196791c6'
    'x-ms-request-id': '8d855da8-7a0c-4eb5-94ea-7dc2dcc238bb'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:40 GMT'
2024-06-28 15:00:45,522 - INFO - AzureCliCredential.get_token succeeded
2024-06-28 15:00:45,522 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-db-path/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '158c0a33-3531-11ef-9e2b-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:46,071 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '158c0a33-3531-11ef-9e2b-a029196791c6'
    'x-ms-request-id': 'e804e3e5-5263-4768-bf35-2fcbf5acc522'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:45 GMT'
    'Content-Length': '279'
2024-06-28 15:00:46,073 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-azure-api-type/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '18fde591-3531-11ef-bc64-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:46,331 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '18fde591-3531-11ef-bc64-a029196791c6'
    'x-ms-request-id': '99f8579c-4965-42c5-ae3b-06e63658aad8'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:45 GMT'
    'Content-Length': '267'
2024-06-28 15:00:46,333 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-open-api-key/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '192595a7-3531-11ef-be2f-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:46,595 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '192595a7-3531-11ef-be2f-a029196791c6'
    'x-ms-request-id': '296815bb-6d53-4793-849a-9c02e30b86b5'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:45 GMT'
    'Content-Length': '292'
2024-06-28 15:00:46,596 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-openai-deployment-version/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '194db81b-3531-11ef-9fea-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:47,529 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '194db81b-3531-11ef-9fea-a029196791c6'
    'x-ms-request-id': '703e59a6-f6c4-4640-a125-0a48d7a40c24'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:46 GMT'
    'Content-Length': '291'
2024-06-28 15:00:47,530 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-openai-deployment-endpoint/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '19dc1a70-3531-11ef-b649-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:47,785 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '19dc1a70-3531-11ef-b649-a029196791c6'
    'x-ms-request-id': '515cf012-20b4-4235-ad33-1ef83123ce83'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:46 GMT'
    'Content-Length': '313'
2024-06-28 15:00:47,787 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-openai-deployment-name/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '1a0342b1-3531-11ef-bb76-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:48,046 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '1a0342b1-3531-11ef-bb76-a029196791c6'
    'x-ms-request-id': 'c1c58186-67e6-4780-8350-48ec6a6d0d9d'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:47 GMT'
    'Content-Length': '276'
2024-06-28 15:00:48,048 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-openai-model/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '1a2b18ed-3531-11ef-9364-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:48,310 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '1a2b18ed-3531-11ef-9364-a029196791c6'
    'x-ms-request-id': '325cda6a-a1ff-44bb-b4c4-04b99686809a'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:47 GMT'
    'Content-Length': '272'
2024-06-28 15:00:48,311 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-openai-ada-enbedding-deployment/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '1a535d2b-3531-11ef-babc-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:48,571 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '1a535d2b-3531-11ef-babc-a029196791c6'
    'x-ms-request-id': 'e9597a05-026d-4c9e-86c6-9ac2ba25daac'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:47 GMT'
    'Content-Length': '288'
2024-06-28 15:00:48,573 - INFO - Request URL: 'https://caseratekeyvault.vault.azure.net/secrets/pl-openai-ada-embedding-model-name/?api-version=REDACTED'
Request method: 'GET'
Request headers:
    'Accept': 'application/json'
    'x-ms-client-request-id': '1a7b3ccb-3531-11ef-9f74-a029196791c6'
    'User-Agent': 'azsdk-python-keyvault-secrets/4.8.0 Python/3.10.8 (Windows-10-10.0.19045-SP0)'
    'Authorization': 'REDACTED'
No body was attached to the request
2024-06-28 15:00:48,835 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-cache'
    'Pragma': 'no-cache'
    'Content-Type': 'application/json; charset=utf-8'
    'Expires': '-1'
    'x-ms-keyvault-region': 'eastus'
    'x-ms-client-request-id': '1a7b3ccb-3531-11ef-9f74-a029196791c6'
    'x-ms-request-id': '44deea84-46ad-4bc8-9925-4a91a96035a9'
    'x-ms-keyvault-service-version': '1.9.1551.1'
    'x-ms-keyvault-network-info': 'conn_type=Ipv4;addr=101.0.63.174;act_addr_fam=InterNetwork;'
    'x-ms-keyvault-rbac-assignment-id': 'REDACTED'
    'X-Content-Type-Options': 'REDACTED'
    'Strict-Transport-Security': 'REDACTED'
    'Date': 'Fri, 28 Jun 2024 09:30:47 GMT'
    'Content-Length': '301'
2024-06-28 15:00:48,837 - INFO - Generating final result for query: "The Supervisor called EMS to transport Mr. Garcia to Stormville Hospital after he slipped and fell backward causing a beam to penetrate his rectum, intestine, colon and bladder on a construction site while working for Rich Construction. Mr. Garcia has had 2 emergency surgeries with another pending for October 12, 2020. His back is injured and he is in constant pain. Mr. Garcia would like assistance with his workers compensation claim. He feels he is not getting proper medical attention as the workers compensation doctor is pushing him to get back to work even before the 3rd surgery is completed. He is not able to walk, sit or stand."
2024-06-28 15:00:49,346 - INFO - Loading faiss with AVX2 support.
2024-06-28 15:00:49,346 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2024-06-28 15:00:49,346 - INFO - Loading faiss.
2024-06-28 15:00:49,698 - INFO - Successfully loaded faiss.
2024-06-28 15:00:53,406 - INFO - HTTP Request: POST https://pl-ver-openai.openai.azure.com//openai/deployments/embedding/embeddings?api-version=2023-05-15 "HTTP/1.1 200 OK"
2024-06-28 15:00:56,181 - INFO - HTTP Request: POST https://pl-ver-openai.openai.azure.com//openai/deployments/gpt-35/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2024-06-28 15:00:58,242 - INFO - HTTP Request: POST https://pl-ver-openai.openai.azure.com//openai/deployments/gpt-35/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2024-06-28 15:00:58,245 - INFO - Final result generated: {"PrimaryCaseType": "Workers Compensation", "SecondaryCaseType": "Workers Compensation", "CaseRating": "Tier 5", "Case State": "NY New York", "Is Workers Compensation (Yes/No)?": "Yes", "Confidence(%)": "100%", "Explanation": "The client, Mr. Garcia, was injured on a construction site while working for Rich Construction. He suffered severe injuries to his rectum, intestine, colon, and bladder, which required two emergency surgeries, with another pending. He is in constant pain and unable to walk, sit or stand. He is seeking assistance with his workers compensation claim and feels he is not getting proper medical attention. The case involves a workplace injury, which falls under the Workers Compensation category. The state mentioned in the description is NY, which stands for New York.\n\nThe case rating is Tier 5 and case types are Workers Compensation and Workers Compensation, which are not specified in any specific rule. The only applicable rule is a general rule that applies to any case type with a Tier 1-5 rating, which recommends referring to the NY section handling firm.", "Handling Firm": "REFER TO NY SECTION", "CaseId": "5b07de6e-a79a-47d2-abb5-8a6e1d78ac06"}
2024-06-28 15:00:58,256 - INFO - Please enter incorrect address here or type 'q' to quit
